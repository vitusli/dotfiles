{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

command -v brew &>/dev/null || exit 0

deps="{{ .chezmoi.sourceDir }}/deps.txt"
grep -v '#windows' "$deps" | grep -v '^$' | while read -r pkg; do
    pkg=$(echo "$pkg" | sed 's/ *#.*//')
    brew install "$pkg" 2>/dev/null
done

# Python tools via uv
if command -v uv &>/dev/null; then
    uv tool install pyright
fi
{{ end -}}
