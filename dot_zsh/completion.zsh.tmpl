# ============================================================================
# ZSH PLUGINS & COMPLETION
# ============================================================================

# Load completion system
if type brew &>/dev/null; then
  FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"
  autoload -Uz compinit
  compinit -C  # -C flag skips security check for faster startup
fi

# Load nova completion
if command -v nova &>/dev/null; then
  source <(nova completion zsh)
fi

# Load chezmoi completion
if command -v chezmoi &>/dev/null; then
  source <(chezmoi completion zsh)
fi

# Load zsh plugins
source {{ .brewPrefix }}/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source {{ .brewPrefix }}/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# Configure completion menu
zstyle ':completion:*' menu select
