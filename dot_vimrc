set clipboard=unnamed

" fzf.vim configuration
set rtp+=/opt/homebrew/bin/fzf

" FZF centered popup window (like Raycast/wilder.nvim)
let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6, 'border': 'rounded' } }

" Space: Scoped search in key directories (mirrors .zshrc)
" Searches: Downloads, Documents, Desktop, chezmoi + Home (max depth 3)
" vim interprets <C-@> as Ctrl+Space
nnoremap <Space> :call fzf#run(fzf#wrap({'source': 'find ~/codespace ~/Downloads ~/Documents ~/Desktop ~/.local/share/chezmoi -maxdepth 10 2>/dev/null; find ~ -maxdepth 3 2>/dev/null', 'sink': 'e'}))<CR>

" Relative line numbers (plus absolute cursor line)
set number
set relativenumber

" H/L f√ºr Zeilenanfang/-ende (wie 0/$)
nnoremap H ^
nnoremap L $
vnoremap H ^
vnoremap L $
onoremap H ^
onoremap L $

" Reduce ESC delay (similar to Zsh KEYTIMEOUT)
set ttimeout
set ttimeoutlen=10   " time to wait for terminal key codes (ESC sequences)
set timeoutlen=300   " mapping timeout; keep reasonable for sequences

" Cursor shape (Terminal Vim) aligned with Zsh vi-mode
" Normal mode: Block, Insert mode: Beam, Replace: Underline
let &t_EI = "\e[2 q"
let &t_SI = "\e[6 q"
let &t_SR = "\e[4 q"

augroup CursorShape
	autocmd!
	autocmd VimEnter,InsertLeave * silent! let &t_EI = "\e[2 q"
	autocmd InsertEnter          * silent! let &t_SI = "\e[6 q"
	autocmd ModeChanged *:[vVsS] silent! if mode() !~# '^[iR]' | let &t_EI = "\e[2 q" | endif
augroup END

" wilder.nvim - Popup cmdline (centered like Raycast)
call wilder#setup({'modes': [':', '/', '?']})
call wilder#set_option('renderer', wilder#popupmenu_renderer(wilder#popupmenu_palette_theme({
      \ 'border': 'rounded',
      \ 'max_height': '75%',
      \ 'min_height': 0,
      \ 'prompt_position': 'top',
      \ 'reverse': 0,
      \ })))
