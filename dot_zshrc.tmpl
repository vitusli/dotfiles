# ============================================================================
# PROMPT & ENVIRONMENT
# ============================================================================

# Minimal prompt without username/hostname
PROMPT='%1~ %% '

# Homebrew initialisieren (Pfad und Umgebungsvariablen setzen)
if [ -f {{ .brewPrefix }}/bin/brew ]; then
  eval "$({{ .brewPrefix }}/bin/brew shellenv)"
fi

# Add local bin to PATH
export PATH="$PATH:$HOME/.local/bin"

# ============================================================================
# EXTERNAL TOOLS
# ============================================================================

# z - directory jumping
source {{ .brewPrefix }}/etc/profile.d/z.sh

# fzf - fuzzy finder
source <(fzf --zsh)
# Copy result to clipboard on Enter (in addition to normal output)
export FZF_DEFAULT_OPTS="--bind 'enter:execute-silent(echo {} | {{ .clipboardCopy }})+accept'"

# zsh-abbr - add to FPATH before compinit
if type brew &>/dev/null; then
  FPATH="$(brew --prefix)/share/zsh-abbr:${FPATH}"
fi

# ============================================================================
# LOAD MODULAR CONFIG
# ============================================================================

# Load all .zsh modules
for config_file in ~/.zsh/*.zsh; do
  source "$config_file"
done

# zsh-abbr - load after compinit (which is in completion.zsh)
source {{ .brewPrefix }}/share/zsh-abbr/zsh-abbr.zsh
